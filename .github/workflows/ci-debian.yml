name: CI Debian

on: [push, pull_request]

jobs:
  Tests:
    runs-on: ubuntu-latest
    container: debian

    steps:

    - name: Git checkout
      uses: actions/checkout@v1

    - name: Install additional packages
      run: ./travis/debian.sh

    - name: List installed packages
      run: apt list --installed | sort

    - name: Autotools
      run: make autotools

    - name: Configure
      run: ./configure

    - name: Compile
      run: make -j$(getconf _NPROCESSORS_ONLN)

    - name: Install
      run: make -j$(getconf _NPROCESSORS_ONLN) install
